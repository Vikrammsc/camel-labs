<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="
             http://www.osgi.org/xmlns/blueprint/v1.0.0
               http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

    <bean id="greeterClient" class="com.redhat.training.pojo.GreetClient">
        <property name="greeterService">
            <reference interface="com.redhat.training.service.greet.Greeter"/>
        </property>
    </bean>

    <camelContext id="training-1" trace="false" xmlns="http://camel.apache.org/schema/blueprint">

        <propertyPlaceholder location="com/fusesource/training/pojo/route-parameters.txt"/>

        <route id="fileToBean">
            <from uri="{{fileURI}}"/>
            <convertBodyTo type="String"/>
            <log message=">>> File received : ${body} in the thread ${threadName}" loggingLevel="INFO" logName="training"/>
            <to uri="{{directURI}}"/>
        </route>

        <route id="direct-to-log">
            <from uri="{{directURI}}"/>
            <bean ref="greeterClient"/>
            <log message=">>> Response received : ${body} in the thread ${threadName}"/>
        </route>

    </camelContext>
</blueprint>